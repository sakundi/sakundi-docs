"use strict";(self.webpackChunktikuna=self.webpackChunktikuna||[]).push([[703],{5680:(e,n,t)=>{t.d(n,{xA:()=>u,yg:()=>y});var r=t(6540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(t),g=a,y=p["".concat(l,".").concat(g)]||p[g]||d[g]||i;return t?r.createElement(y,o(o({ref:n},u),{},{components:t})):r.createElement(y,o({ref:n},u))}));function y(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=g;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[p]="string"==typeof e?e:a,o[1]=s;for(var c=2;c<i;c++)o[c]=t[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},1359:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var r=t(8168),a=(t(6540),t(5680));const i={id:"using-zikuani-third-party",title:"Using Zikuani as a provider",sidebar_label:"Using Zikuani as a provider",description:"Sakundi - Using Zikuani as a provider",keywords:["sakundi","zikuani","identity","wallet"],hide_table_of_contents:!0,custom_edit_url:null},o="\ud83e\uddea Tutorial: How to integrate customer code with the Zikuani wallet to obtain proofs of indentity",s={unversionedId:"user-section/using-zikuani-third-party",id:"user-section/using-zikuani-third-party",title:"Using Zikuani as a provider",description:"Sakundi - Using Zikuani as a provider",source:"@site/docs/user-section/using-zikuani-third-party.md",sourceDirName:"user-section",slug:"/user-section/using-zikuani-third-party",permalink:"/docs/user-section/using-zikuani-third-party",draft:!1,editUrl:null,tags:[],version:"current",frontMatter:{id:"using-zikuani-third-party",title:"Using Zikuani as a provider",sidebar_label:"Using Zikuani as a provider",description:"Sakundi - Using Zikuani as a provider",keywords:["sakundi","zikuani","identity","wallet"],hide_table_of_contents:!0,custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"Wallet Installation",permalink:"/docs/user-section/client-installation"},next:{title:"What is ZK Voto Digital?",permalink:"/docs/user-section/what-is-zk-voto-digital"}},l={},c=[{value:"\ud83d\udce6 1. Project Setup",id:"-1-project-setup",level:2},{value:"Required Libraries",id:"required-libraries",level:3},{value:"\ud83d\udd10 2. Environment Configuration",id:"-2-environment-configuration",level:2},{value:"\ud83e\uddfe 3. JWT Parser",id:"-3-jwt-parser",level:2},{value:"\ud83d\udeaa 4. Entry Route <code>/</code>",id:"-4-entry-route-",level:2},{value:"\ud83d\udd04 5. Callback Route <code>/callback</code>",id:"-5-callback-route-callback",level:2},{value:"Step 1: Validate code",id:"step-1-validate-code",level:3},{value:"Step 2: Exchange code for access token",id:"step-2-exchange-code-for-access-token",level:3},{value:"Step 3: Render token response",id:"step-3-render-token-response",level:3},{value:"\ud83d\ude80 6. Start the Server",id:"-6-start-the-server",level:2},{value:"\u2705 Summary",id:"-summary",level:2},{value:"\ud83d\udd10 Use Cases",id:"-use-cases",level:2}],u={toc:c},p="wrapper";function d(e){let{components:n,...t}=e;return(0,a.yg)(p,(0,r.A)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"-tutorial-how-to-integrate-customer-code-with-the-zikuani-wallet-to-obtain-proofs-of-indentity"},"\ud83e\uddea Tutorial: How to integrate customer code with the Zikuani wallet to obtain proofs of indentity"),(0,a.yg)("p",null,"This tutorial explains how to create an OAuth 2.0 client using ",(0,a.yg)("inlineCode",{parentName:"p"},"Express.js")," and ",(0,a.yg)("inlineCode",{parentName:"p"},"axios")," to authenticate and receive a ",(0,a.yg)("strong",{parentName:"p"},"verifiable credential")," using zero-knowledge proofs. In the end, the client can obtain a proof of the user's identity without needing to access sensitive data."),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"-1-project-setup"},"\ud83d\udce6 1. Project Setup"),(0,a.yg)("h3",{id:"required-libraries"},"Required Libraries"),(0,a.yg)("p",null,"Install dependencies:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"npm install express axios querystring\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"-2-environment-configuration"},"\ud83d\udd10 2. Environment Configuration"),(0,a.yg)("p",null,"The app reads configuration values from environment variables, with fallbacks:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},'const CLIENT_ID = process.env.REACT_APP_CLIENT_ID || "hello@example.com";\nconst CLIENT_SECRET = process.env.REACT_APP_CLIENT_SECRET || "password";\nconst REDIRECT_URI = process.env.REACT_APP_REDIRECT_URI || "http://localhost:3000/callback";\nconst AUTH_SERVER_URL = process.env.REACT_APP_AUTH_SERVER_URL || "https://app.sakundi.io";\nconst ACCOUNT = process.env.ACCOUNT || "0x86E67a05324A55AF6B2b3bF1A5cBA1778C56A8bE";\n')),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"-3-jwt-parser"},"\ud83e\uddfe 3. JWT Parser"),(0,a.yg)("p",null,"This function decodes a JWT access token (Base64URL) ",(0,a.yg)("strong",{parentName:"p"},"without verifying the signature"),":"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"function parseJwt(token) {\n  const base64Url = token.split('.')[1];\n  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n  const jsonPayload = decodeURIComponent(atob(base64).split('').map((c) =>\n    '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2)).join('')\n  );\n  return JSON.parse(jsonPayload);\n}\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"-4-entry-route-"},"\ud83d\udeaa 4. Entry Route ",(0,a.yg)("inlineCode",{parentName:"h2"},"/")),(0,a.yg)("p",null,"Displays a page with a link to begin authentication:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},'app.get(\'/\', (req, res) => {\n  const authUrl = `${AUTH_SERVER_URL}/authorize?` + querystring.stringify({\n    grant_type: "code",\n    client_id: CLIENT_ID,\n    client_secret: CLIENT_SECRET,\n    user_id: ACCOUNT,\n    redirect_uri: REDIRECT_URI,\n    scope: "zk-firma-digital",\n    state: String(Math.floor(Math.random() * 10000)),\n    nullifier_seed: 1000\n  });\n\n  res.send(\\`\n    <h1>Autent\xedquese con su Firma Digital</h1>\n    <p><a href="\\${authUrl}">Haga click en el enlace para comenzar el proceso de autenticaci\xf3n</a></p>\n  \\`);\n});\n')),(0,a.yg)("p",null,"This redirects to the OAuth server."),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"-5-callback-route-callback"},"\ud83d\udd04 5. Callback Route ",(0,a.yg)("inlineCode",{parentName:"h2"},"/callback")),(0,a.yg)("p",null,"Handles the redirect back from the OAuth server:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"app.get('/callback', async (req, res) => {\n  const { code, state } = req.query;\n")),(0,a.yg)("h3",{id:"step-1-validate-code"},"Step 1: Validate code"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"  if (!code) return res.status(400).send('Se requiere c\xf3digo de autenticaci\xf3n');\n")),(0,a.yg)("h3",{id:"step-2-exchange-code-for-access-token"},"Step 2: Exchange code for access token"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"  const response = await axios.post(\\`\\${AUTH_SERVER_URL}/token\\`,\n    querystring.stringify({\n      code,\n      client_id: CLIENT_ID,\n      client_secret: CLIENT_SECRET,\n      redirect_uri: REDIRECT_URI,\n      grant_type: 'authorization_code'\n    }),\n    {\n      headers: { 'Content-Type': 'application/x-www-form-urlencoded' }\n    }\n  );\n")),(0,a.yg)("h3",{id:"step-3-render-token-response"},"Step 3: Render token response"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"  const { access_token, token_type, expires_in, verifiable_credential } = response.data;\n\n  res.send(\\`\n    <html>\n      <head><title>Token Recibido</title></head>\n      <style>\n        body { font-family: sans-serif; padding: 2em; line-height: 1.5; }\n        pre { background: #f4f4f4; padding: 1em; border-radius: 4px; overflow-x: auto; }\n      </style>\n      <body>\n        <h1>\xa1Token de acceso recibido!</h1>\n        <p><strong>Tipo de Token:</strong> \\${token_type}</p>\n        <p><strong>Expira en:</strong> \\${expires_in} minutos</p>\n        <p><strong>Token:</strong></p>\n        <pre>\\${JSON.stringify(parseJwt(access_token), null, 2)}</pre>\n        <p><strong>Credencial verificable con prueba ZK:</strong></p>\n        <pre>\\${JSON.stringify(verifiable_credential, null, 2)}</pre>\n      </body>\n    </html>\n  \\`);\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"-6-start-the-server"},"\ud83d\ude80 6. Start the Server"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-js"},"const PORT = process.env.PORT || 3000;\napp.listen(PORT, () => {\n  console.log(\\`OAuth client running on http://localhost:\\${PORT}\\`);\n});\n")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"-summary"},"\u2705 Summary"),(0,a.yg)("p",null,"This app:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Sends a user to authenticate with an OAuth server"),(0,a.yg)("li",{parentName:"ul"},"Handles the ",(0,a.yg)("inlineCode",{parentName:"li"},"callback")," with an authorization code"),(0,a.yg)("li",{parentName:"ul"},"Exchanges the code for an access token and a ZK verifiable credential"),(0,a.yg)("li",{parentName:"ul"},"Displays token details and credential nicely in the browser")),(0,a.yg)("hr",null),(0,a.yg)("h2",{id:"-use-cases"},"\ud83d\udd10 Use Cases"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Zero-Knowledge identity issuance"),(0,a.yg)("li",{parentName:"ul"},"OAuth + cryptographic wallet login flows"),(0,a.yg)("li",{parentName:"ul"},"Secure credential sharing for Web3 / digital ID systems")))}d.isMDXComponent=!0}}]);